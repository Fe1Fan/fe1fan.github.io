<!doctype html><html><head><title>MySQL 笔记2：架构 // Fe1Fan</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="学习笔记"><meta property="og:title" content="MySQL 笔记2：架构"><meta property="og:description" content="学习笔记"><meta property="og:type" content="website"><meta property="og:locale" content="en"><meta property="og:url" content="https://fe1.fan/posts/mysql/mysql-note-2/"><link rel="shortcut icon" href=/favicon.ico><link href=https://fe1.fan/webfonts/ptserif/main.css rel=stylesheet type=text/css><link href=https://fe1.fan/webfonts/source-code-pro/main.css rel=stylesheet type=text/css><link rel=stylesheet href=https://fe1.fan/css/style.css><meta name=generator content="Hugo 0.75.1"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;></a><a id=logo class=logo-text href=https://fe1.fan/>Fe1Fan</a><nav id=main-nav><a class=main-nav-link href=/>主页</a>
<a class=main-nav-link href=/tags/>归档</a>
<a class=main-nav-link href=/about/>关于</a>
<a class=main-nav-link href=/index.xml>订阅</a></nav><nav id=sub-nav><div id=search-form-wrap></div></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>MySQL 笔记2：架构</h1></header><div class=article-meta><a href="/posts/mysql/mysql-note-2/?uid=9129b32b75c4a5f640e67445596284f2" class=article-date><time datetime=2020-10-07T14:23:52.000+08:00 itemprop=datePublished>2020-10-07</time></a></div><div class=article-entry itemprop=articleBody><h2 id=mysql-组成>MySQL 组成</h2><ul><li>Server层<ul><li>连接器</li><li>查询缓存</li><li>分析器</li><li>优化器</li><li>执行器</li></ul></li><li>存储层<ul><li>存储引擎</li></ul></li></ul><h3 id=server层>Server层</h3><p>内置函数、存储过程、触发器、视图等。</p><h4 id=1连接器>1.连接器</h4><p>负责跟客户端建立链接、获取权限、维持和管理链接。</p><p>每个连接都会在服务器进程中拥有一个独立的线程。</p><p>当认证通过建立连接之后，连接器会到权限表里面查出你拥有的权限。之后，这个连接里
面的权限判断逻辑，都将依赖于此时读到的权限。如果此时做了权限更变，重新连接之后才能生效。</p><h4 id=2查询缓存>2.查询缓存</h4><p>当执行语句的时候，会先查询缓存，看是否执行过。</p><p>之前执行过的语句和结果会以kv的方式直接存储在内存中。</p><p>MySQL8.0开始弃用</p><h4 id=3分析器>3.分析器</h4><p>分析器负责SQL语句的语法分析。判断语句是否正确、表是否存在、列是否存在、别名是否有歧义等。</p><h4 id=4优化器>4.优化器</h4><p>在经过分析器的语法分析之后，开始执行语句之前，优化器会进行处理。</p><p>优化器负责决定表里存在多个索引的时候，使用哪一个索引；或者多表关联的时候决定表的连接顺序。</p><h4 id=5执行器>5.执行器</h4><p>开始执行的时候，执行器首先判断你是否拥有所查询表的权限，如果没有权限则返回错误。</p><h3 id=存储层>存储层</h3><p>插件式架构，支持如下：</p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>ARCHIVE</td><td>数据存档（行被插入后不能修改）</td></tr><tr><td>BLACKHOLE</td><td>丢弃写操作，读操作会返回空内容</td></tr><tr><td>CSV</td><td>在存储数据时，以逗号分隔各个数据项</td></tr><tr><td>FEDERATED</td><td>用来访问远程表</td></tr><tr><td>InnoDB</td><td>具备外键支持功能的事务存储引擎</td></tr><tr><td>MEMORY</td><td>置于内存的表</td></tr><tr><td>MERGE</td><td>用来管理多个MyISAM表构成的表集合</td></tr><tr><td>MyISAM</td><td>主要的非事务处理存储引擎</td></tr><tr><td>NDB</td><td>MySQL集群专用存储引擎</td></tr></tbody></table></div><div class=article-toc><h3>Contents</h3><nav id=TableOfContents><ul><li><a href=#mysql-组成>MySQL 组成</a><ul><li><a href=#server层>Server层</a></li><li><a href=#存储层>存储层</a></li></ul></li></ul></nav></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://fe1.fan/tags/mysql>mysql</a></li></ul></footer></div><nav id=article-nav><a href=/posts/mysql/mysql-note-1/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
MySQL 笔记1：基础</div></a><a href=/posts/mysql/mysql-note-3/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>MySQL 笔记3：索引&nbsp;<span>></span></div></a></nav></article></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2021 Fe1Fan<br>Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a></div></div><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var header=document.getElementById('header');if(header.classList.contains('mobile-on')){header.classList.remove('mobile-on');}else{header.classList.add('mobile-on');}});</script></footer></div></body></html>