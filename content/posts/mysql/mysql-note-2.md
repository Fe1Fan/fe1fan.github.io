---
title: "MySQL 笔记2：架构"
date: 2020-10-07T14:23:52+08:00
tags: [mysql]
draft: true
---
<!--more-->
## MySQL 组成

- Server层
  - 连接器
  - 查询缓存
  - 分析器
  - 优化器
  - 执行器
- 存储层 
  - 存储引擎

### Server层
内置函数、存储过程、触发器、视图等。

#### 1.连接器
负责跟客户端建立链接、获取权限、维持和管理链接。

每个连接都会在服务器进程中拥有一个独立的线程。

当认证通过建立连接之后，连接器会到权限表里面查出你拥有的权限。之后，这个连接里
面的权限判断逻辑，都将依赖于此时读到的权限。如果此时做了权限更变，重新连接之后才能生效。

#### 2.查询缓存
当执行语句的时候，会先查询缓存，看是否执行过。

之前执行过的语句和结果会以kv的方式直接存储在内存中。

MySQL8.0开始弃用

#### 3.分析器
分析器负责SQL语句的语法分析。判断语句是否正确、表是否存在、列是否存在、别名是否有歧义等。

#### 4.优化器
在经过分析器的语法分析之后，开始执行语句之前，优化器会进行处理。

优化器负责决定表里存在多个索引的时候，使用哪一个索引；或者多表关联的时候决定表的连接顺序。

#### 5.执行器
开始执行的时候，执行器首先判断你是否拥有所查询表的权限，如果没有权限则返回错误。


### 存储层
插件式架构，支持InnoDB、MyISAM、 Memory 等。
